var retroStyle = [{
    "elementType": "geometry",
    "stylers": [{
      "color": "#ebe3cd"
    }]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#523735"
    }]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [{
      "color": "#f5f1e6"
    }]
  },
  {
    "featureType": "administrative",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#c9b2a6"
    }]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#dcd2be"
    }]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#ae9e90"
    }]
  },
  {
    "featureType": "landscape.natural",
    "elementType": "geometry",
    "stylers": [{
      "color": "#dfd2ae"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "geometry",
    "stylers": [{
      "color": "#dfd2ae"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#93817c"
    }]
  },
  {
    "featureType": "poi.business",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry.fill",
    "stylers": [{
      "color": "#a5b076"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#447530"
    }]
  },
  {
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [{
      "color": "#f5f1e6"
    }]
  },
  {
    "featureType": "road.arterial",
    "elementType": "geometry",
    "stylers": [{
      "color": "#fdfcf8"
    }]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [{
      "color": "#f8c967"
    }]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#e9bc62"
    }]
  },
  {
    "featureType": "road.highway.controlled_access",
    "elementType": "geometry",
    "stylers": [{
      "color": "#e98d58"
    }]
  },
  {
    "featureType": "road.highway.controlled_access",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#db8555"
    }]
  },
  {
    "featureType": "road.local",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "road.local",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#806b63"
    }]
  },
  {
    "featureType": "transit.line",
    "elementType": "geometry",
    "stylers": [{
      "color": "#dfd2ae"
    }]
  },
  {
    "featureType": "transit.line",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#8f7d77"
    }]
  },
  {
    "featureType": "transit.line",
    "elementType": "labels.text.stroke",
    "stylers": [{
      "color": "#ebe3cd"
    }]
  },
  {
    "featureType": "transit.station",
    "elementType": "geometry",
    "stylers": [{
      "color": "#dfd2ae"
    }]
  },
  {
    "featureType": "water",
    "elementType": "geometry.fill",
    "stylers": [{
      "color": "#b9d3c2"
    }]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#92998d"
    }]
  }
];

var normalStyle = [{
    "featureType": "administrative.land_parcel",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.business",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "road.local",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  }
];

var nightStyle = [{
    "elementType": "geometry",
    "stylers": [{
      "color": "#242f3e"
    }]
  },
  {
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#746855"
    }]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [{
      "color": "#242f3e"
    }]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "administrative.locality",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#d59563"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#d59563"
    }]
  },
  {
    "featureType": "poi.business",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry",
    "stylers": [{
      "color": "#263c3f"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#6b9a76"
    }]
  },
  {
    "featureType": "road",
    "elementType": "geometry",
    "stylers": [{
      "color": "#38414e"
    }]
  },
  {
    "featureType": "road",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#212a37"
    }]
  },
  {
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#9ca5b3"
    }]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [{
      "color": "#746855"
    }]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry.stroke",
    "stylers": [{
      "color": "#1f2835"
    }]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#f3d19c"
    }]
  },
  {
    "featureType": "road.local",
    "elementType": "labels",
    "stylers": [{
      "visibility": "off"
    }]
  },
  {
    "featureType": "transit",
    "elementType": "geometry",
    "stylers": [{
      "color": "#2f3948"
    }]
  },
  {
    "featureType": "transit.station",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#d59563"
    }]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [{
      "color": "#17263c"
    }]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [{
      "color": "#515c6d"
    }]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.stroke",
    "stylers": [{
      "color": "#17263c"
    }]
  }
];

var icons = [{
    title: 'truck',
    url: 'http://maps.google.com/mapfiles/ms/micons/truck.png'
  },
  {
    title: 'pin',
    url: 'http://maps.google.com/mapfiles/ms/micons/blue-pushpin.png'
  },
  {
    title: 'man',
    url: 'http://maps.google.com/mapfiles/ms/micons/man.png'
  },
  {
    title: 'dot',
    url: 'http://maps.google.com/mapfiles/ms/micons/blue-dot.png'
  },
  {
    title: 'moto',
    url: 'http://maps.google.com/mapfiles/ms/micons/motorcycling.png'
  },
  {
    title: 'ski',
    url: 'http://maps.google.com/mapfiles/ms/micons/ski.png'
  }
];

var map;

var markers = []; //En este array guardamos las lista de locations como markers

function initMap() {

  map = new google.maps.Map(document.getElementById('map'), {
    center: { lat: 51.508408,  lng: -0.127676},
    zoom: 10
  });


/*  document.getElementById.addListener('click', function() {
    populateInfoWindow(this, myInfowindow);
  });*/


  //Debo cambiar el icono como opciones con botones sobre el mapa
  var markerIcon = icons[1].url;

  var myInfowindow = new google.maps.InfoWindow();
  var bounds = new google.maps.LatLngBounds();

  for (var i = 0; i < myVM.placeList().length; i++) {
    // Get the position from the location array.
    var position = myVM.searchResults()[i].location;
    var title = myVM.searchResults()[i].title();
    // Create a marker per location, and put into markers array.
    var marker = new google.maps.Marker({
      map: map,
      position: position,
      title: title,
      animation: google.maps.Animation.DROP,
      icon: markerIcon,
      id: i
    });


    // Push the marker to our array of markers.
    markers.push(marker);
    // Create an onclick event to open the large infowindow at each marker.
    marker.addListener('click', function() {
      populateInfoWindow(this, myInfowindow);
    });

    bounds.extend(markers[i].position);

  }
  map.fitBounds(bounds);

}


function populateInfoWindow(marker, infowindow) {
  // Check to make sure the infowindow is not already opened on this marker.
  if (infowindow.marker != marker) {
    infowindow.marker = marker;
    infowindow.setContent('<div>' + marker.title + '</div>');
    infowindow.open(map, marker);
    // Make sure the marker property is cleared if the infowindow is closed.
    infowindow.addListener('closeclick', function() {
      infowindow.setMarker = null;
    });
  }
}

function showListInfwindow(){




}
